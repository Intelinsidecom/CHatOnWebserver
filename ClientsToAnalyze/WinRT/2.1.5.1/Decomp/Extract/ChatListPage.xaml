<Page x:ConnectionId='1' x:Class="ChatON_WoA.Views.ChatListPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:ChatON_WoA.Views"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:infra="using:ChatOn.Infrastructure"
      xmlns:customcontrol="using:ChatOn.Controls"
      NavigationCacheMode="Required"
      mc:Ignorable="d"
                                  >
    <Page.Resources>
        <BitmapImage x:Key="defaultMuteIcon" UriSource="/Images/icons/icon_mute.png"/>
        <BitmapImage x:Key="defaultArrowMark" UriSource="/Images/profile bg_arrow.png"/>
        <BitmapImage x:Key="defaultChatDefault" UriSource="/Images/chat_defult.png"/>
        <DataTemplate x:Key="ChatListItemTemplate">
            <Grid Background="{Binding Background}"
                  VerticalAlignment="Top">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="10" />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <Grid x:ConnectionId='2' x:Name="ChatItemImageGrid"
                      Margin="10"
                                                         
                      Height="60"
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center">
                    <Image Visibility="{Binding SingleChatBuddy, Converter={StaticResource ObjectNullToShow}}"
                           Source="{Binding ProfileImage}"
                           Width="60"
                           Height="60"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           Stretch="UniformToFill" />
                    <Image x:ConnectionId='4' Source="{Binding SingleChatBuddy.ThumbProfileImage}"
                           Visibility="{Binding SingleChatBuddy, Converter={StaticResource ObjectNullToHide}}"
                           Width="60"
                           Height="60"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           Stretch="Fill"
                           x:Name="ProfileImageControl"
                                                               />
                    <Image Source="{StaticResource defaultMuteIcon}"
                           Visibility="{Binding IsAlert, Converter={StaticResource ReverseBoolToVisibility}}"
                           Margin="0, 0, 3, 3"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Bottom"
                           Width="29"
                           Height="20"></Image>
                </Grid>
                <Grid x:ConnectionId='3' Grid.Column="2"
                      Background="Transparent"
                                                
                      Margin="0,10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    <Grid Grid.Row="0"
                          VerticalAlignment="Center">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <TextBlock x:Name="textTitle"
                                   Text="{Binding Title}"
                                   Foreground="{Binding NameForeground}"
                                   TextWrapping="NoWrap"
                                   VerticalAlignment="Center"
                                   FontSize="25.333"
                                   FontFamily="Segoe UI Light"
                                   FontWeight="Light"
                                   TextTrimming="WordEllipsis"  MaxHeight="30"/>
                        <TextBlock VerticalAlignment="Center"
                                   FontSize="25.333"
                                   Grid.Column="1"
                                   Foreground="Gray"
                                   Text="{Binding MemberCountText}"
                                   Visibility="{Binding MemberCountText, Converter={StaticResource StringNullOrEmptyToHide}}"
                                   FontFamily="Segoe UI Light"
                                   FontWeight="Light" />
                        <TextBlock Text="{Binding DisplayDate, Converter={StaticResource DateToTimePolicyValue}}"
                                   Margin="10,0,6,0"
                                   Foreground="Gray"
                                   TextWrapping="Wrap"
                                   HorizontalAlignment="Right"
                                   FontSize="20"
                                   FontFamily="Segoe UI Light"
                                   Grid.Column="2"
                                   VerticalAlignment="Center" />
                    </Grid>
                    <Grid Grid.Row="1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <customcontrol:ChatTextBlock IsParsingLinkEnabled="False"
                                                     EmoticonSize="22"
                                                     Text="{Binding SubTitle}"
                                                     Grid.Column="0"
                                                     MaxLength="140"
                                                     VerticalAlignment="Center"
                                                     HorizontalAlignment="Left"
                                                     ForegroundText="{Binding SubTitleForeground}"
                                                     FontSize="20"
                                                     FontFamily="Segoe UI Light"
                                                     Height="30" />
                        <StackPanel HorizontalAlignment="Right"
                                    Grid.Column="1"
                                    Orientation="Horizontal"
                                    Height="27"
                                    VerticalAlignment="Bottom"
                                    Margin="0,0,6,6">
                            <Grid Margin="0"
                                  Visibility="{Binding UnreadTrunkMessageCount, ConverterParameter=0, Converter={StaticResource BiggerThanParamToVisibility}}">
                                <Image Source="/Images/bubble_blue.png"
                                       Stretch="Fill"
                                       NineGrid="12,3,3,8" />
                                <TextBlock Text="{Binding UnreadTrunkMessageCount}"
                                           TextWrapping="Wrap"
                                           FontSize="16"
                                           FontFamily="Segoe UI Light"
                                           TextAlignment="Center"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Top"
                                           Margin="0,1,0,0"
                                           Foreground="#E5FFFFFF"
                                           FontWeight="Bold" />
                            </Grid>
                            <Grid Margin="8,0,0,0"
                                  Visibility="{Binding UnreadMessageCount, ConverterParameter=0, Converter={StaticResource BiggerThanParamToVisibility}}">
                                <Image Source="/Images/bubble_orange.png"
                                       Stretch="Fill"
                                       NineGrid="12,3,3,8" />
                                <TextBlock Text="{Binding UnreadMessageCount, Converter={StaticResource UnreadMessageCountConverter}}"
                                           TextWrapping="Wrap"
                                           FontSize="16"
                                           FontFamily="Segoe UI Light"
                                           TextAlignment="Center"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Top"
                                           Margin="0,1,0,0"
                                           Foreground="#E5FFFFFF"
                                           FontWeight="Bold" />
                            </Grid>
                        </StackPanel>
                    </Grid>
                </Grid>
                <Image x:Name="arrowMark"
                       Source="{StaticResource defaultArrowMark}"
                       Visibility="{Binding Background,Converter={StaticResource BackgroundVisibilityConverter}}"
                       Stretch="None"
                       HorizontalAlignment="Right"
                       Grid.ColumnSpan="3" />
            </Grid>
        </DataTemplate>
    </Page.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="120" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <Border Grid.Column="1"
                BorderThickness="1"
                BorderBrush="DarkGray">
            <Grid Background="White">
                <ListView  Grid.Column="1"
                           x:Name="ChatListView"
                           SelectionMode="None"
                           HorizontalAlignment="Left"
                           Width="348"
                           ItemContainerStyle="{StaticResource FullWidthBlinkAnimationListItemStyle}"
                           ItemTemplate="{StaticResource ChatListItemTemplate}"
                           ItemsSource="{Binding ChatItems}"
                           Background="{x:Null}"
                           Foreground="{x:Null}">
                    <ListView.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel />
                        </ItemsPanelTemplate>
                    </ListView.ItemsPanel>
                </ListView>
                <customcontrol:EmoticonChooser Grid.Column="1"
                                               Visibility="Collapsed"
                                               x:Name="EmoticonChooserControl"
                                               Width="348" />
            </Grid>
        </Border>
        <Frame x:Name="CurrentChatFrame"
               Grid.Column="2"
               Visibility="Collapsed" />
        <Border Grid.Column="2"
                BorderThickness="1"
                BorderBrush="DarkGray">
            <Grid Grid.Column="2"
                  x:Name="SelectChatNoticeGrid"
                  Background="White">
                <StackPanel HorizontalAlignment="Center"
                            VerticalAlignment="Center">
                    <Image  Width="197"
                            Height="136"
                            Source="{StaticResource defaultChatDefault}" />
                    <TextBlock Text="{Binding Converter={StaticResource ResourceStringConverter},ConverterParameter='IDS_CHATON_BODY_START_CHAT_WITH_YOUR_BUDDIES'}"
                               FontSize="42"
                               TextWrapping="Wrap"
                               TextTrimming="WordEllipsis"
                               TextAlignment="Center" />
                </StackPanel>
            </Grid>
        </Border>
        <Grid Grid.ColumnSpan="2"
              Grid.Column="1"
              Width="Auto"
              Background="Transparent"
              HorizontalAlignment="Center"
              x:Name="BuddyProfileContainer"
              Visibility="Collapsed"
              VerticalAlignment="Center">

        </Grid>
    </Grid>

</Page>

