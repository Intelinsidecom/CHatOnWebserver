<Page x:Class="ChatON_WoA.CustomCameraCapture"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:ChatON_WoA"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:controls="using:ChatON_WoA.Controls"
      mc:Ignorable="d">

    <Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">

        <Canvas x:ConnectionId='1' x:Name="previewCanvas"
                                             
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch">
            <CaptureElement x:ConnectionId='3' x:Name="capturePreview"
                            Stretch="UniformToFill"
                            Visibility="{Binding Path=ShowPreviewElement}"
                            HorizontalAlignment="Center"
                            Height="{Binding ElementName=previewCanvas, Path=ActualHeight}"
                            Width="{Binding ElementName=previewCanvas, Path=ActualWidth}"
                                                           />
            <Image x:Name="captureCropElement"
                   Stretch="UniformToFill"
                   HorizontalAlignment="Center"
                   Source="{Binding Path=TempBitmapImage}"
                   Height="{Binding ElementName=previewCanvas, Path=ActualHeight}"
                   Width="{Binding ElementName=previewCanvas, Path=ActualWidth}">
            </Image>

            <Canvas Visibility="{Binding Path=ShowCroppingElement}">
                <Rectangle x:Name="tg"
                           Fill="Black"
                           StrokeThickness="0"
                           Opacity="0.5" />
                <Rectangle x:Name="lg"
                           Fill="Black"
                           StrokeThickness="0"
                           Opacity="0.5" />
                <Rectangle x:Name="rg"
                           Fill="Black"
                           StrokeThickness="0"
                           Opacity="0.5" />
                <Rectangle x:Name="bg"
                           Fill="Black"
                           StrokeThickness="0"
                           Opacity="0.5" />
                <Rectangle x:ConnectionId='4' x:Name="area"
                           Fill="Transparent"
                           StrokeThickness="0"
                           ManipulationMode="All"
                                                                        />
                <Ellipse x:ConnectionId='5' Opacity="0.7"
                         x:Name="lt"
                         Visibility="Collapsed"
                         ManipulationMode="All"
                                                                
                         Fill="#FFF4F4F5"
                         HorizontalAlignment="Left"
                         Height="40"
                         Stroke="Black"
                         VerticalAlignment="Top"
                         Width="40"
                         StrokeThickness="3" />
                <Ellipse x:ConnectionId='6' Opacity="0.7"
                         x:Name="rt"
                         Visibility="Collapsed"
                         ManipulationMode="All"
                                                                
                         Fill="#FFF4F4F5"
                         HorizontalAlignment="Left"
                         Height="40"
                         Stroke="Black"
                         VerticalAlignment="Top"
                         Width="40"
                         StrokeThickness="3" />
                <Ellipse x:ConnectionId='7' Opacity="0.7"
                         x:Name="lb"
                         Visibility="Collapsed"
                         ManipulationMode="All"
                                                                
                         Fill="#FFF4F4F5"
                         HorizontalAlignment="Left"
                         Height="40"
                         Stroke="Black"
                         VerticalAlignment="Top"
                         Width="40"
                         StrokeThickness="3" />
                <Ellipse x:ConnectionId='8' Opacity="0.7"
                         x:Name="rb"
                         Visibility="Collapsed"
                         ManipulationMode="All"
                                                                
                         Fill="#FFF4F4F5"
                         HorizontalAlignment="Left"
                         Height="40"
                         Stroke="Black"
                         VerticalAlignment="Top"
                         Width="40"
                         StrokeThickness="3" />
            </Canvas>
        </Canvas>

        <Canvas Grid.RowSpan="2"
                Visibility="{Binding Path=ShowNumber}"
                Grid.ColumnSpan="2"
                VerticalAlignment="Center"
                HorizontalAlignment="Center">
            <controls:CountdownControl x:Name="myCountdownControl"
                                       Canvas.Left="-50"
                                       Canvas.Top="-50" />
        </Canvas>

        <Button x:ConnectionId='2' Visibility="{Binding Path=ShowPreviewElement}"
                Margin="50,50,0,0"
                VerticalAlignment="Top"
                x:Name="backButton"
                IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}"
                Style="{StaticResource BackButtonStyle}"
                                         />

    </Grid>

    <Page.BottomAppBar>
        <AppBar x:Name="AppbarButtom"
                Opacity="0.8"
                IsOpen="True">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <StackPanel Grid.Column="0">

                </StackPanel>
                <StackPanel Grid.Column="2"
                            Orientation="Horizontal"
                            Visibility="{Binding Path=ShowPreviewElement}">
                    <Button x:ConnectionId='15' AutomationProperties.Name="{Binding Converter={StaticResource ResourceStringConverter},ConverterParameter='WP7_CAM_SWITCH_CAMERA'}"
                            Visibility="{Binding Path=ShowChangeCamera}"
                            Tag="{Binding Converter={StaticResource ResourceStringConverter},ConverterParameter='WP7_CAM_SWITCH_CAMERA'}"
                            Style="{StaticResource RotateCameraAppBarButtonStyle}"
                                                         ></Button>
                    <Button x:ConnectionId='16' AutomationProperties.Name="{Binding Converter={StaticResource ResourceStringConverter},ConverterParameter='IDS_CHATON_BODY_SETTINGS_ABB'}"
                            Tag="{Binding Converter={StaticResource ResourceStringConverter},ConverterParameter='IDS_CHATON_BODY_SETTINGS_ABB'}"
                            Style="{StaticResource SettingsAppBarButtonStyle}"
                                                           ></Button>
                    <Button x:ConnectionId='17' AutomationProperties.Name="{Binding Converter={StaticResource ResourceStringConverter},ConverterParameter='WP7_CAM_TIMER'}"
                            Tag="{Binding Converter={StaticResource ResourceStringConverter},ConverterParameter='WP7_CAM_TIMER'}"
                            Style="{StaticResource ClockAppBarButtonStyle}"
                                                  ></Button>
                </StackPanel>

                <StackPanel Grid.Column="2"
                            Visibility="{Binding Path=ShowCaptureElement}"
                            Orientation="Horizontal">
                    <Button x:ConnectionId='11' AutomationProperties.Name="{Binding Converter={StaticResource ResourceStringConverter},ConverterParameter='IDS_CHATON_SK_ROTATE'}"
                            Tag="{Binding Converter={StaticResource ResourceStringConverter},ConverterParameter='IDS_CHATON_SK_ROTATE'}"
                            Style="{StaticResource RefreshAppBarButtonStyle}"
                                                   ></Button>
                    <Button x:ConnectionId='12' AutomationProperties.Name="{Binding Converter={StaticResource ResourceStringConverter},ConverterParameter='WP7_CAM_CROP'}"
                            Tag="{Binding Converter={StaticResource ResourceStringConverter},ConverterParameter='WP7_CAM_CROP'}"
                            Style="{StaticResource CropAppBarButtonStyle}"
                                                 ></Button>
                    <Button x:ConnectionId='13' AutomationProperties.Name="{Binding Converter={StaticResource ResourceStringConverter},ConverterParameter='IDS_CHATON_BUTTON_OK'}"
                            Tag="{Binding Converter={StaticResource ResourceStringConverter},ConverterParameter='IDS_CHATON_BUTTON_OK'}"
                            Style="{StaticResource YesAppBarButtonStyle}"
                                               ></Button>
                    <Button x:ConnectionId='14'  AutomationProperties.Name="{Binding Converter={StaticResource ResourceStringConverter},ConverterParameter='IDS_CHATON_SK_RETAKE'}"
                             Tag="{Binding Converter={StaticResource ResourceStringConverter},ConverterParameter='IDS_CHATON_SK_RETAKE'}"
                             Style="{StaticResource UndoAppBarButtonStyle}"
                                                    ></Button>
                </StackPanel>

                <StackPanel Grid.Column="2"
                            Visibility="{Binding Path=ShowCroppingElement}"
                            Orientation="Horizontal">
                    <Button x:ConnectionId='9'  AutomationProperties.Name="{Binding Converter={StaticResource ResourceStringConverter},ConverterParameter='IDS_CHATON_BUTTON_OK'}"
                             Tag="{Binding Converter={StaticResource ResourceStringConverter},ConverterParameter='IDS_CHATON_BUTTON_OK'}"
                             Style="{StaticResource YesAppBarButtonStyle}"
                                                      ></Button>
                    <Button x:ConnectionId='10' AutomationProperties.Name="{Binding Converter={StaticResource ResourceStringConverter},ConverterParameter='IDS_CHATON_OPT_CANCEL_ABB'}"
                            Tag="{Binding Converter={StaticResource ResourceStringConverter},ConverterParameter='IDS_CHATON_OPT_CANCEL_ABB'}"
                            Style="{StaticResource NoAppBarButtonStyle}"
                                                       ></Button>
                </StackPanel>

            </Grid>
        </AppBar>
    </Page.BottomAppBar>

</Page>

