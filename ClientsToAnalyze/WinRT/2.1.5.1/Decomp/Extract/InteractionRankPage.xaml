<Page x:ConnectionId='1'
    x:Name="pageRoot"
    x:Class="ChatON_WoA.Views.InteractionRankPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:ChatON_WoA.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:customControl="using:ChatOn.Controls"
                                       
    mc:Ignorable="d">

    <Page.Resources>
        <DataTemplate x:Key="InteractionRankItemTemplate">
            <Grid Width="250" Height="336" HorizontalAlignment="Left">
                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid Grid.RowSpan="2">
                    <Image Stretch="UniformToFill" Source="{Binding Buddy.ProfileImage}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Grid>
                <Grid Background="#8E000000" HorizontalAlignment="Stretch" Grid.Row="1" VerticalAlignment="Top" >
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid x:ConnectionId='3' VerticalAlignment="Top" Margin="14,0"                                      >
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="{Binding Buddy.Name}" VerticalAlignment="Top" FontSize="25.333" TextTrimming="WordEllipsis" Foreground="White" FontFamily="Segoe UI Light" d:LayoutOverrides="GridBox" HorizontalAlignment="Left"/>
                        <TextBlock Text="{Binding DisplayRank}" VerticalAlignment="Top" FontSize="25.333" Foreground="White" FontFamily="Segoe UI Light" HorizontalAlignment="Right" d:LayoutOverrides="GridBox"/>
                    </Grid>
                    <customControl:RatioChart LeftImage="Images/rank_progress_yellow.png" RightImage="Images/rank_progress_orange.png" 
        				HorizontalAlignment="Stretch" Height="22" VerticalAlignment="Top" Margin="14,0,14,2" 
        				LeftText="{Binding ReceivedCount}" RightText="{Binding SentCount}" 
        				LeftValue="{Binding ReceivedCount}" RightValue="{Binding SentCount}" StandardValue="{Binding BestInteractionPoint}"
        				LeftFontColor="Black" RightFontColor="Black" Grid.Row="1"/>
                </Grid>
            </Grid>
        </DataTemplate>

        <DataTemplate x:Key="InteractionRankSmallItemTemplate">
            <Grid x:ConnectionId='2' Margin="0,5,100,10" Width="300" HorizontalAlignment="Left"                                      >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
                <Image HorizontalAlignment="Left" VerticalAlignment="Top" Stretch="Fill" Width="60" Height="60" Source="{Binding Buddy.ThumbProfileImage}"/>
                <TextBlock Grid.Column="1" Text="{Binding Buddy.Name}" VerticalAlignment="Top" Margin="10,0,0,0" FontSize="25.333" Foreground="Black" FontFamily="Segoe UI Light" TextTrimming="WordEllipsis"/>
                <Grid Grid.Column="1" Background="Transparent" HorizontalAlignment="Stretch">
                    <customControl:RatioChart LeftImage="Images/rank_progress_yellow.png" RightImage="Images/rank_progress_orange.png" 
                                              HorizontalAlignment="Stretch" Height="22" VerticalAlignment="Bottom" Margin="10,0,0,2" 
                                              LeftText="{Binding ReceivedCount}" RightText="{Binding SentCount}" 
                                              LeftValue="{Binding ReceivedCount}" RightValue="{Binding SentCount}" StandardValue="{Binding BestInteractionPoint}"
                                              LeftFontColor="Black" RightFontColor="Black"/>
                </Grid>
            </Grid>
        </DataTemplate>

    </Page.Resources>

    <Grid x:Name="LayoutRoot" Background="#FFF4F4F4">
        <Grid.RowDefinitions>
            <RowDefinition Height="140"/>
            <RowDefinition Height="45"/>            
            <RowDefinition Height="530"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Back button and page title -->
        <Grid >
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Button x:ConnectionId='8' x:Name="backButton" IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}" Style="{StaticResource BackButtonStyle}"                         />
            <TextBlock x:Name="pageTitle" Grid.Column="1" Text="{Binding Converter={StaticResource ResourceStringConverter}, ConverterParameter='IDS_CHATON_HEADER_INTERACTION_RANK'}" Style="{StaticResource PageHeaderTextStyle}" Foreground="Black"/>
        </Grid>
        <Grid Grid.Row="1" Margin="100,0,0,0" VerticalAlignment="Top">
            <StackPanel Orientation="Horizontal">
                <Button x:ConnectionId='4' Background="Transparent" BorderBrush="Transparent"                         Tag="1" Style="{StaticResource HeaderButtonStyle}">
                    <TextBlock Text="This week" Style="{StaticResource SubheaderTextStyle}" x:Name="thisweekBtn" Tag="1" Opacity="{Binding SelectedIndex, ConverterParameter=1, Converter={StaticResource SelectedIndexToOpacity}}"/>
                </Button>
                <Button x:ConnectionId='5' Background="Transparent" BorderBrush="Transparent"                         Tag="2" Style="{StaticResource HeaderButtonStyle}">
                    <TextBlock Text="Last week" Style="{StaticResource SubheaderTextStyle}" x:Name="lastweekBtn" Tag="2" Opacity="{Binding SelectedIndex, ConverterParameter=2, Converter={StaticResource SelectedIndexToOpacity}}"/>
                </Button>
                <Button x:ConnectionId='6' Background="Transparent" BorderBrush="Transparent"                         Tag="3" Style="{StaticResource HeaderButtonStyle}">
                    <TextBlock Text="2 weeks ago" Style="{StaticResource SubheaderTextStyle}" x:Name="lasttwoweekBtn" Tag="3" Opacity="{Binding SelectedIndex, ConverterParameter=3, Converter={StaticResource SelectedIndexToOpacity}}"/>
                </Button>
                <Button x:ConnectionId='7' Background="Transparent" BorderBrush="Transparent"                           Tag="4" Style="{StaticResource HeaderButtonStyle}">
                    <TextBlock Text="3 weeks ago" Style="{StaticResource SubheaderTextStyle}" x:Name="lastthreeweekBtn" Tag="4" Opacity="{Binding SelectedIndex, ConverterParameter=4, Converter={StaticResource SelectedIndexToOpacity}}"/>
                </Button>
            </StackPanel>
        </Grid>
        <SemanticZoom x:Name="semanticZoom" Grid.Row="2" IsZoomOutButtonEnabled="True">
            <SemanticZoom.ZoomedOutView>
                <GridView SelectionMode="None" ItemsSource="{Binding ThisWeekRankedBuddies}" ItemTemplate="{StaticResource InteractionRankItemTemplate}"  Margin="120,0,0,0" x:Name="NormalRankControl">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapGrid Orientation="Vertical"/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </GridView>
            </SemanticZoom.ZoomedOutView>
            <SemanticZoom.ZoomedInView>
                <GridView SelectionMode="None" ItemsSource="{Binding ThisWeekRankedBuddies}" ItemTemplate="{StaticResource InteractionRankSmallItemTemplate}" Margin="115,0,0,0" x:Name="SmallRankControl">

                </GridView>
            </SemanticZoom.ZoomedInView>
        </SemanticZoom>

        <SemanticZoom x:Name="semanticWeek1" Grid.Row="2" IsZoomOutButtonEnabled="True" Visibility="Collapsed">
            <SemanticZoom.ZoomedOutView>
                <GridView SelectionMode="None" ItemsSource="{Binding LastWeekRankedBuddies}" ItemTemplate="{StaticResource InteractionRankItemTemplate}"  Margin="120,0,0,0" >
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapGrid Orientation="Vertical"/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </GridView>
            </SemanticZoom.ZoomedOutView>
            <SemanticZoom.ZoomedInView>
                <GridView SelectionMode="None" ItemsSource="{Binding LastWeekRankedBuddies}" ItemTemplate="{StaticResource InteractionRankSmallItemTemplate}" Margin="115,0,0,0" >

                </GridView>
            </SemanticZoom.ZoomedInView>
        </SemanticZoom>

        <SemanticZoom x:Name="semanticWeek2" Grid.Row="2" IsZoomOutButtonEnabled="True" Visibility="Collapsed">
            <SemanticZoom.ZoomedOutView>
                <GridView SelectionMode="None" ItemsSource="{Binding LastTwoWeekRankedBuddies}" ItemTemplate="{StaticResource InteractionRankItemTemplate}"  Margin="120,0,0,0" >
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapGrid Orientation="Vertical"/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </GridView>
            </SemanticZoom.ZoomedOutView>
            <SemanticZoom.ZoomedInView>
                <GridView SelectionMode="None" ItemsSource="{Binding LastTwoWeekRankedBuddies}" ItemTemplate="{StaticResource InteractionRankSmallItemTemplate}" Margin="115,0,0,0" >

                </GridView>
            </SemanticZoom.ZoomedInView>
        </SemanticZoom>

        <SemanticZoom x:Name="semanticWeek3" Grid.Row="2" IsZoomOutButtonEnabled="True" Visibility="Collapsed">
            <SemanticZoom.ZoomedOutView>
                <GridView SelectionMode="None" ItemsSource="{Binding LastThreeWeekRankedBuddies}" ItemTemplate="{StaticResource InteractionRankItemTemplate}"  Margin="120,0,0,0" >
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapGrid Orientation="Vertical"/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </GridView>
            </SemanticZoom.ZoomedOutView>
            <SemanticZoom.ZoomedInView>
                <GridView SelectionMode="None" ItemsSource="{Binding LastThreeWeekRankedBuddies}" ItemTemplate="{StaticResource InteractionRankSmallItemTemplate}" Margin="115,0,0,0" >

                </GridView>
            </SemanticZoom.ZoomedInView>
        </SemanticZoom>
        <Grid Grid.Row="2" Visibility="{Binding NoInteractionVisibility}" Margin="120,14,120,0" Background="White">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
            <Image Source="/Images/interaction-rank_defult.png" Height="168" Width="120"  VerticalAlignment="Top"/>
            <TextBlock Text="{Binding Converter={StaticResource ResourceStringConverter},ConverterParameter='IDS_CHATON_BODY_NO_INTERACTIONS'}" VerticalAlignment="Top" HorizontalAlignment="Center" FontSize="31"/>
            </StackPanel>
        </Grid>
        <StackPanel Orientation="Horizontal" Grid.Row="3" Margin="123,0,0,0" VerticalAlignment="Top" Visibility="{Binding InteractionVisibility}">
            <Image x:Name="LeftImageControl" HorizontalAlignment="Left" Stretch="Fill" VerticalAlignment="Top" Source="Images/rank_progress_yellow.png" Width="33" Height="33"/>
            <TextBlock VerticalAlignment="Center" Text="{Binding Converter={StaticResource ResourceStringConverter},ConverterParameter='IDS_CHATON_BODY_BUDDY_ABB'}" Margin="8 0 0 0" FontFamily="Segoe UI Light" FontSize="18" />
            <Image x:Name="RightImageControl" Stretch="Fill" VerticalAlignment="Top" Source="Images/rank_progress_orange.png" Width="33" Height="33" Margin="32 0 0 0" />
            <TextBlock VerticalAlignment="Center" Margin="8 0 0 0" Text="{Binding Converter={StaticResource ResourceStringConverter},ConverterParameter='IDS_CHATON_BODY_ME'}" FontFamily="Segoe UI Light" FontSize="18" />
        </StackPanel>
    </Grid>
</Page>

