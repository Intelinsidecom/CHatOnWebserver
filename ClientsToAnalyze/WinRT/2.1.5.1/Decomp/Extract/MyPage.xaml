<Page
    x:Class="ChatON_WoA.Views.MyPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:ChatON_WoA.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:infra="using:ChatOn.Infrastructure"
    xmlns:customControl="using:ChatOn.Controls"
    NavigationCacheMode="Required"
    mc:Ignorable="d">
    <Page.Resources>
        <!--<DataTemplate x:Key="InteractionRankItemTemplate">
            <Grid Margin="20,10,15,10" HorizontalAlignment="Stretch" Tapped="InteractionRank_OnTapped">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Image HorizontalAlignment="Left" VerticalAlignment="Top" Stretch="Fill" Width="60" Height="60" Source="{Binding Buddy.ThumbProfileImage}"/>
                <TextBlock Grid.Column="1" Text="{Binding Buddy.Name}" VerticalAlignment="Top" Margin="10,0,0,0" FontSize="25.333" TextTrimming="WordEllipsis" Foreground="Black" FontFamily="Segoe UI Light" FontWeight="Light"/>
                <Grid Grid.Column="1" Background="Transparent" HorizontalAlignment="Stretch">
                    <customControl:RatioChart LeftImage="Images/rank_progress_yellow.png" RightImage="Images/rank_progress_orange.png" 
                                              HorizontalAlignment="Stretch" Height="22" VerticalAlignment="Bottom" Margin="10,0,0,2" 
                                              LeftText="{Binding ReceivedCount}" RightText="{Binding SentCount}" 
                                              LeftValue="{Binding ReceivedCount}" RightValue="{Binding SentCount}" StandardValue="{Binding BestInteractionPoint}"
                                              LeftFontColor="Black" RightFontColor="Black"/>
                </Grid>
            </Grid>
        </DataTemplate>-->
        <DataTemplate x:Key="BuddiesSayItemTemplate">
            <Grid Tag="tilt"  Margin="20,10,15,10" >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <!--Loaded="Image_
                
                _1"-->
                <Grid Width="60"
                      Height="60"
                      VerticalAlignment="Top">
                    <Image x:ConnectionId='2'                         Source="{Binding ProfileImage}" HorizontalAlignment="Center" VerticalAlignment="Center" Stretch="UniformToFill"/>
                </Grid>
                <Grid x:ConnectionId='1' Grid.Column="1"                        Background="Transparent" VerticalAlignment="Top">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Row="0" Grid.Column="0" Margin="10,0,0,0" FontSize="19" TextWrapping="NoWrap" TextTrimming="WordEllipsis" Text="{Binding Name}" FontWeight="SemiBold" FontFamily="Segoe UI Light" MaxHeight="30"/>
                    <TextBlock Grid.Row="0" Grid.Column="1" Margin="5,0,5,0" FontSize="15" Text="{Binding Date, Converter={StaticResource DateToTimePolicyValue}}" Foreground="#FF328195" FontFamily="Segoe UI" FontWeight="SemiBold"/>
                    <TextBlock Grid.Row="1" Grid.ColumnSpan="2" FontSize="15" HorizontalAlignment="Left" Margin="10,5,0,5" TextWrapping="Wrap" Text="{Binding Message}" FontFamily="Segoe UI Regular" Opacity="0.6"/>
                </Grid>
            </Grid>
        </DataTemplate>
        <DataTemplate x:Key="PhoneNumberListTemplate">
            <TextBlock Margin="0,0,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Text="{Binding}" Foreground="#FF328195" FontFamily="Segoe UI Light" FontSize="20"/>
        </DataTemplate>
    </Page.Resources>

    <Grid x:Name="LayoutRoot">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="120" />
                <ColumnDefinition Width="340" />
                <ColumnDefinition Width="40" />
                <ColumnDefinition Width="*" MinWidth="500"/>
                <ColumnDefinition Width="40" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="120" />
            </Grid.ColumnDefinitions>

            <Grid x:Name="gridColumn1" Grid.Column="1" Background="White">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Grid Grid.Row="0" Height="280" Width="280" HorizontalAlignment="Left">
                    <!--<Image x:Name="DefaultProfileImage" HorizontalAlignment="Center" Margin="20,20,0,0" VerticalAlignment="Center" Source="/Images/chat_info_single.png" Tapped="Image_Tapped_1" Stretch="UniformToFill"/>-->
                    <Image x:ConnectionId='14' x:Name="ProfileImageBG"
                           HorizontalAlignment="Center"
                           Margin="20,20,0,0"
                           VerticalAlignment="Center"
                           Source="/Images/chat_info_single.png"                         Stretch="UniformToFill"/>
                    
                    <Image x:ConnectionId='15' x:Name="ProfileImage" HorizontalAlignment="Center" Margin="20,20,0,0" VerticalAlignment="Center" Source="{Binding MyProfile.ProfileImage, Mode=TwoWay}"                         Stretch="UniformToFill"/>
                    <!--<customControl:ImageDelayControl ProfileImageSource="{Binding ProfileImage}" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="20,20,0,0" Width="230" Height="230"  x:Name="ProfileImage" Loaded="ProfileImage_Loaded" />-->
                </Grid>
                <Grid Grid.Row="1" HorizontalAlignment="Stretch" Margin="20,0,30,0" >
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <TextBlock x:ConnectionId='5'                               HorizontalAlignment="Left" Margin="0,32,0,0" Grid.Row="0" TextTrimming="WordEllipsis" VerticalAlignment="Top" Text="{Binding MyProfile.Name}" Foreground="Black" FontFamily="Segoe UI Light" FontSize="36" FontWeight="Light" TextWrapping="NoWrap" MaxHeight="40"/>

                    <Image x:ConnectionId='6' Grid.Column="1"                               HorizontalAlignment="Left" VerticalAlignment="Center" Stretch="None" Source="Images/my_page_arrow.png" Margin="5,32,0,0"/>
                    <TextBlock x:ConnectionId='7' HorizontalAlignment="Left" Grid.Row="1" TextWrapping="Wrap" VerticalAlignment="Top" Text="{Binding Converter={StaticResource ResourceStringConverter}, ConverterParameter='IDS_CHATON_MBODY_REGISTER_YOUR_PHONE_NUMBER'}" Foreground="#FF328195" FontFamily="Segoe UI Light" FontSize="18" Visibility="{Binding MyProfile.PhoneNumber, Converter={StaticResource StringNullOrEmptyToHide}, ConverterParameter='!'}"                                     />

                    <Image x:ConnectionId='8' Grid.Column="1"
                                    HorizontalAlignment="Left" 
                                    VerticalAlignment="Center" Stretch="None" Source="Images/my_page_arrow.png" Margin="5,0,0,0" 
                                    Visibility="{Binding MyProfile.PhoneNumber, Converter={StaticResource StringNullOrEmptyToHide}, ConverterParameter='!'}" 
                                       Grid.Row="1"                                     />

                    <Grid x:ConnectionId='9' Grid.Row="2"                                Height="50"  Grid.ColumnSpan="2" Visibility="{Binding MyProfile.Email, Converter={StaticResource StringNullOrEmptyToHide}, ConverterParameter='!'}" Background="White">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Row="2" HorizontalAlignment="Left" TextWrapping="Wrap" VerticalAlignment="Center" Text="{Binding Converter={StaticResource ResourceStringConverter}, ConverterParameter='IDS_CHATON_BODY_SIGN_IN'}" Foreground="#FF328195" FontFamily="Segoe UI Light" FontSize="18" Visibility="{Binding MyProfile.Email, Converter={StaticResource StringNullOrEmptyToHide}, ConverterParameter='!'}" Margin="0,0,0,10"/>

                        <Image Grid.Row="2" Grid.Column="1"
                                    HorizontalAlignment="Left" 
                                    VerticalAlignment="Center" Stretch="None" Source="Images/my_page_arrow.png" Margin="5,0,0,0" Visibility="{Binding MyProfile.Email, Converter={StaticResource StringNullOrEmptyToHide}, ConverterParameter='!'}" 
                                    />
                    </Grid>
                    <!-- end of added-->

                    <TextBlock x:ConnectionId='10' Grid.Row="1"                                      Margin="0, 5, 0, 0" TextWrapping="Wrap" VerticalAlignment="Top" Text="{Binding MyProfile.PhoneNumber, Converter={StaticResource InternationalPhonenumberConverter}}" Foreground="#FF328195" FontFamily="Segoe UI Light" FontSize="20" Visibility="{Binding MappingList,Converter={StaticResource ObjectCountToHide}}"/>
                    <ItemsControl  Grid.Row="2" Margin="0, 0, 0, 0" ItemTemplate="{StaticResource PhoneNumberListTemplate}" ItemsSource="{Binding MappingList}" Foreground="#FF328195" FontFamily="Segoe UI Light" FontSize="20"  HorizontalAlignment="Left" VerticalAlignment="Top" />
                    <TextBlock x:ConnectionId='11' Grid.Row="3" Margin="0, 5, 0, 0" TextWrapping="Wrap" VerticalAlignment="Top"                               Text="{Binding MyProfile.Email}" Foreground="#FF328195" FontFamily="Segoe UI Light" FontSize="18"/>
                    <TextBlock x:ConnectionId='12' Grid.Row="4" Margin="0, 0, 0, 0" TextWrapping="Wrap" VerticalAlignment="Top"                               Text="{Binding MyProfile.DisplayBirthday}" Visibility="{Binding MyProfile.DisplayBirthday, Converter={StaticResource StringNullOrEmptyToHide}}" Foreground="#FF328195" FontFamily="Segoe UI Light" FontSize="20"/>
                    <TextBlock x:ConnectionId='13' Grid.Row="5" Margin="0, 5, 0, 0" TextWrapping="Wrap" VerticalAlignment="Top"                               Text="{Binding MyProfile.Status}" Foreground="#FFFA877D" FontFamily="Segoe UI Light" FontSize="24" MaxHeight="90" TextTrimming="WordEllipsis"/>
                </Grid>

            </Grid>

            <!-- Commented for Removed the Interaction Rank
            <Grid x:Name="gridColumn2" Grid.Column="3" Background="White" Width="0" Height="0">
                <Grid HorizontalAlignment="Stretch" Width="{Binding ElementName=gridColumn2, Path=Width}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <StackPanel x:Name="stc" VerticalAlignment="Top" Orientation="Horizontal" Height="51" Background="Transparent" Tapped="Interaction_Tapped_1" Margin="0,5,0,0">
                        <TextBlock x:Name="Text1" HorizontalAlignment="Left" Margin="20,0,0,0" TextWrapping="Wrap" VerticalAlignment="Center" Text="Interaction rank" Foreground="Black" FontSize="25.333" FontFamily="Segoe UI Light"/>
                        <Image HorizontalAlignment="Left" VerticalAlignment="Center" Margin="20,0,0,0" Source="Images/my_page_arrow.png" Stretch="None"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Grid.Row="1" Margin="20, -5,20,2" VerticalAlignment="Top" HorizontalAlignment="Right" Visibility="{Binding IsEmptyRankList, Converter={StaticResource BoolToVisibility}, ConverterParameter='!'}">
                        <Image x:Name="LeftImageControl" HorizontalAlignment="Left" Stretch="Fill" VerticalAlignment="Top" Source="Images/rank_progress_yellow.png" Width="20" Height="20"/>
                        <TextBlock VerticalAlignment="Center" Text="{Binding Converter={StaticResource ResourceStringConverter},ConverterParameter='IDS_CHATON_BODY_BUDDY_ABB'}" Margin="8 0 0 0" FontFamily="Segoe UI Light" FontSize="14" />
                        <Image x:Name="RightImageControl" Stretch="Fill" VerticalAlignment="Top" Source="Images/rank_progress_orange.png" Width="20" Height="20" Margin="32 0 0 0" />
                        <TextBlock VerticalAlignment="Center" Margin="8 0 0 0" Text="{Binding Converter={StaticResource ResourceStringConverter},ConverterParameter='IDS_CHATON_BODY_ME'}" FontFamily="Segoe UI Light" FontSize="14" />
                    </StackPanel>
                    <ListView 
                        Grid.Row="2"
                        ScrollViewer.VerticalScrollBarVisibility="Auto"
                        ScrollViewer.VerticalScrollMode="Auto" x:Name="ListInteractionRank"  Margin="0,15,0,10" SelectionMode="None" Visibility="{Binding IsEmptyRankList, Converter={StaticResource BoolToVisibility}, ConverterParameter='!'}" ItemsSource="{Binding BuddyRankItems}" ItemTemplate="{StaticResource InteractionRankItemTemplate}" HorizontalContentAlignment="Stretch" ItemContainerStyle="{StaticResource FullWidthListItemStyle}" />

                    <StackPanel Orientation="Vertical" Grid.Row="2" VerticalAlignment="Center" HorizontalAlignment="Center" Visibility="{Binding IsEmptyRankList, Converter={StaticResource BoolToVisibility}}">
                        <Image  Width="120" Height="168" Source="/Images/interaction-rank_defult.png" HorizontalAlignment="Center"></Image>
                        <TextBlock FontSize="24" Margin="0,20,0,0" FontFamily="Segoe UI Regular" HorizontalAlignment="Center" TextAlignment="Center" Text="{Binding Converter={StaticResource ResourceStringConverter},ConverterParameter='IDS_CHATON_BODY_NO_INTERACTIONS'}" />
                    </StackPanel>
                    
                </Grid>
            </Grid>-->

            <Grid x:Name="gridColumn3" Grid.Column="3" Background="White">
                <Grid Margin="20,0,0,0" HorizontalAlignment="Stretch" Width="{Binding ElementName=gridColumn3, Path=Width}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    <StackPanel VerticalAlignment="Top" Orientation="Horizontal" Height="51" Margin="0,5,0,0">
                        <TextBlock x:ConnectionId='4' x:Name="Text2" HorizontalAlignment="Left" TextWrapping="Wrap" VerticalAlignment="Center" Text="Buddies say" Foreground="Black" FontSize="25.333" FontFamily="Segoe UI Light"                          />
                        <Image HorizontalAlignment="Left" VerticalAlignment="Center" Margin="20,0,0,0" Source="Images/my_page_arrow.png" Stretch="None" Visibility="Collapsed" />
                    </StackPanel>

                    <ListView x:ConnectionId='3' 
                        x:Name="BuddiesSayList"
                                                      
                        Grid.Row="1" Margin="-20 0 0 0" 
                        Visibility="{Binding IsEmptyMemoList, Converter={StaticResource BoolToVisibility}, ConverterParameter='!'}" 
                        ItemsSource="{Binding MemoList}" 
                        SelectionMode="None" ItemTemplate="{StaticResource BuddiesSayItemTemplate}" 
                        HorizontalAlignment="Left" HorizontalContentAlignment="Stretch" 
                        ScrollViewer.VerticalScrollBarVisibility="Auto" ScrollViewer.VerticalScrollMode="Auto"
                        ItemContainerStyle="{StaticResource FullWidthListItemStyle}"/>
                    <StackPanel Grid.Row="1" Visibility="{Binding IsEmptyMemoList, Converter={StaticResource BoolToVisibility}}" VerticalAlignment="Center" HorizontalAlignment="Center">
                        <Image  Width="121" Height="171" Source="/Images/buddies_default2.png"></Image>
                        <TextBlock FontSize="24" Margin="0,20,0,0" FontFamily="Segoe UI Regular" HorizontalAlignment="Center" TextAlignment="Center" Text="{Binding Converter={StaticResource ResourceStringConverter},ConverterParameter='IDS_CHATON_MBODY_NO_BUDDIES_SAY_MESSAGES'}"  />
                    </StackPanel>

                </Grid>
            </Grid>
        </Grid>

    </Grid>
</Page>

