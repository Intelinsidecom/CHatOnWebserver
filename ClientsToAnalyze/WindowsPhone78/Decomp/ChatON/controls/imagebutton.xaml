<UserControl x:Class="ChatOn.Controls.ImageButton"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:ChatOn.Controls">
    <UserControl.Resources>
        <ControlTemplate x:Key="ImageButtonTemplate" TargetType="local:ImageButtonBase">
            <Grid Background="Transparent">
                <VisualStateManager.VisualStateGroups>
                    <VisualStateGroup x:Name="CommonStates">
                        <VisualState x:Name="Normal"/>
                        <VisualState x:Name="MouseOver"/>
                        <VisualState x:Name="Pressed">
                            <Storyboard>
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="PressedImg"/>
                                    <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="NormalImg"/>
                                    <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="DisabledImg"/>
                                </Storyboard>
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="Disabled">
                            <Storyboard>
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="DisabledImg"/>
                                    <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="PressedImg"/>
                                    <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="NormalImg"/>
                                </Storyboard>
                            </Storyboard>
                        </VisualState>
                    </VisualStateGroup>
                    <VisualStateGroup x:Name="FocusStates">
                        <VisualState x:Name="Focused"/>
                        <VisualState x:Name="Unfocused"/>
                    </VisualStateGroup>
                </VisualStateManager.VisualStateGroups>
                <Image x:Name="PressedImg" Margin="0" Source="{TemplateBinding PressedImage}" Stretch="None" Opacity="0"/>
                <Image x:Name="DisabledImg" Margin="0" Source="{TemplateBinding DisabledImage}" Stretch="None" />
                <Image x:Name="NormalImg" Margin="0" Source="{TemplateBinding NormalImage}" Stretch="None" />
            </Grid>
        </ControlTemplate>
    </UserControl.Resources>
        
    <Grid x:Name="LayoutRoot">
        <local:ImageButtonBase x:Name="imgBtn" Template="{StaticResource ImageButtonTemplate}"/>
    </Grid>
</UserControl>
